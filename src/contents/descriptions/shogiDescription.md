# オリジナル将棋を作ってみよう！

駒の種類や盤面をカスタマイズして、オリジナルの将棋ゲームを作ることができます。

## ゲームの基本設定

盤面と、ゲームのルールに関する設定です。

`縦のマス数`, `横のマス数` は、盤面のマスの数を設定します。

`持ち駒を使うか` は、取った相手の駒を持ち駒として使えるかどうかです。`true` を設定すると、持ち駒を使えます。`false` を設定すると、持ち駒は使えず、持ち駒置き場も表示されなくなります。

## 駒を作る

ここでは、駒の作り方を説明していきます。  
駒を作る前に、駒の動きを表すパーツを作る必要があるので、先にその作り方を説明します。

### 駒の動きを表すパーツの作り方

駒の動きを表すパーツを作るには、 `JumpMove`

1.

### 駒の作り方

1. `PieceBase`クラスを継承して新しくクラスを作り、その中で次に示すプロパティを設定する  
   書き方の例を下に示す

```
class King extends PieceBase {
  constructor() {
    super(...arguments);
    this.NAME = "King";
    this.SYMBOL = "K";
    this.MOVE = new JumpMove([new Vector(1, 0), new Vector(1, 1)], "oct");
    this.IS_ROYAL = true;
  }
}
```

- 必須のもの
  - `NAME` : 駒の名前(表示名ではありません)
  - `SYMBOL` : 駒の表示名
  - `MOVE` : 駒の動き
- 必須ではないもの
  - `INITIAL_MOVE` : 最初に動くときの駒の動き。デフォルトでは `MOVE` と同じ
  - `IS_ROYAL` : `true` にすると、将棋の王将やチェスのキングのように、取られると負ける駒になる。
    デフォルトでは `false`
  - `FORCE_PROMOTE` : 成ることができる状態になったときに、強制的に成るか。デフォルトでは `false`
- 通常は直接設定しないもの  
  (駒の成りを設定する場合は、2.の手順をとること。)
  - `PROMOTE_DEFAULT` : 何の駒に成るか。デフォルトでは何も設定されていない。
  - `ORIGINAL_PIECE` : 取られて持ち駒に移動するときに何になるか。デフォルトでは元の駒と同じ

2. 成りの設定をする  
   新しく作った駒のクラスを `NewPiece` とする。
   いま、 `NewPiece` が `Piece1, Piece2` のうち 1 種類に成るようにしたいとき、次のように設定する。

```
Pawn.updatePromotion([
    [Piece1],
    [Piece2],
]);
```

## 見た目に関する設定

文字やマスの色、大きさなどを簡単に設定できます。変数名にマウスポインターを合わせると、詳しい説明を見ることができます。

`後手の駒を反転させるか` は、`true` にすると後手の駒の文字を 180 度回転させます。将棋のように駒が向かい合う見た目にしたい場合は `true`、チェスのように駒の色のみを変えたい場合は `false` を設定してください。

`色` は、基本的な色の名前を英語で入力すれば反映されます(`black`, `red` など)。使用できるすべての色の名前は[こちら](https://developer.mozilla.org/ja/docs/Web/CSS/named-color)で確認できます。また、RGB 値の 16 進表記などでも入力できます(#RRGGBB)。

`境界線` は、太さ、色、種類を空白区切りで指定できます。種類には `solid`, `dashed`, `double`, `none` などがあります。詳しくは[こちら](https://developer.mozilla.org/ja/docs/Web/CSS/border)をご覧ください。

`マスの一辺の長さ` と `フォントサイズ` は数値で指定してください。単位は `px`(ピクセル)です。

## 詳細な仕様

JavaScript に慣れている方向けに、定義されているいくつかの関数や変数に関して説明します。これらを利用することで、さらにカスタマイズすることが可能です。

### イベントハンドラ

#### `マスがクリックされた時`

マスがクリックされた時に実行される関数です。引数の `x`, `y` はクリックされたマスの座標です。

#### `持ち駒がクリックされた時`

持ち駒がクリックされた時に実行される関数です。引数の `player` はどちらのプレイヤーの持ち駒か、`index` は上から何番目に表示されている持ち駒かを表します。

### 便利な関数

基本的に変更する必要はありません。

#### `showMessage`

引数に指定した文字列を画面上部に表示します。

#### `renderCell`

引数に指定された座標のマスの現在の状態を画面に反映します。マスの状態を変更した後に実行してください。

#### `renderCapturedPiece`

引数に指定されたプレイヤーの現在の持ち駒を持ち駒置き場に反映します。持ち駒の状態を変更した後に実行してください。
